# XML & Tomcat

## XML

> extensible markup language 可扩展标记语言

### application

+ 保存数据
+ 做配置文件
+ 数据传输载体

### initialize XML

> 其实就是一个文件，文件的后缀为.xml

+ 文档声明。version-解析这个XML使用什么版本的解析器解析；encoding-解析XML中的文字的时候，使用什么编码器来翻译。standalone-no表示该文档会依赖关联其他文档，yes表示为独立的文档。

  `<?xml version="1.0" encoding="gbk" standalone=no ?>`

### encoding details

> 在解析这个XML的时候，使用什么编码去解析。---解码
>
> 默认文件保存的时候使用的是GBK编码保存。

+ 电脑上的文件在保存的时候并不是真正的存储文字，而是存储这些文字对应的二进制。那么这些文字对应的二进制到底是多少呢？根据文件使用的编码来得到。所以要想XML正常显示中文，有两种解决办法。
  - 让encoding也是GBK或者gb2312
  - 如果encoding是utf-8，那么保存文件的时候也必须使用utf-8
  - 保存的时候见到ANSI对应的其实是我们本地编码GBK

### 元素定义

+ 其实就是里面的标签，<>括起来的都叫元素。成对出现。

  `<stu></stu>`

+ 文档声明下来的第一个元素叫做根元素（根标签）。

+ 标签里面可以嵌套标签

+ 空标签

  - 既是开始，也是结束。一般配合属性来用。

    `<age/>`

+ 标签可以自定义，命名尽量简单，见名知意。

### 简单元素&复杂元素

+ 简单元素

  > 元素里面包含了普通的文字

+ 复杂元素

  > 元素里面还可以嵌套其他的元素

### 属性attribute

> 定义在元素里面，<元素名称 属性名称=“属性的值”></元素名称>

`<stu id="10086"></stu>`

## XML注释

> 与HTML注释一样

`<!-- -->`

> XML的注释，不允许放置在文档第一行。必须在文档声明的下面。

## CDATA区

+ 非法字符
  - 严格来讲，在XML中仅有"<"和"&"是非法的。省略号、引号和大于号是合法的，但是把它们替换为实体引用（&lt;和&amp;）是个好的习惯。

+ 如果某段字符串里面有过多的字符，并且里面包含了类似标签或者关键字的这种文字，不想让XML的解析器去解析。那么可以使用CDATA来包装。不过这个CDATA一般比较少看到。通常在服务器给客户端返回数据的时候。

  `<des><![CDATA[<a href="http://www.baidu.com">我爱黑马训练营</a>]]</des>`

## XML解析

> 其实就是获取元素里面的字符数据或者属性数据。

### XML解析方式

> 有很多种，但是常用的有两种。

+ DOM
  - document object modal
  - 把整个XML全部读到内存当中，形成树状结构。整个文档称之为document对象，属性对应Attribute对象，所有的元素节点对应Element对象，文本也可以称之为Text对象，以上所有对象都可以称之为Node节点。
  - 如果XML特别大，那么将会造成内存溢出。
  - 可以对文档进行增删操作。
+ SAX
  - Simple API for XML基于事件驱动
  - 读取一行，解析一行。
  - 不会造成内存溢出。
  - 不可以进行增删，只能查询。

### 针对这两种解析方式的API

> 一些组织或者公司，针对以上两种解析方式，给出的解决方案有哪些？

+ jaxp
  - sun公司，比较繁琐。
+ jdom
+ dom4j
  - 使用比较广泛

### Dom4j 基本用法

+ 创建SaxReader对象
+ 指定解析的XML
+ 获取根元素
+ 根据根元素获取子元素或者下面的子孙元素

### Dom4j的Xpath使用

+ dom4j里面支持Xpath的写法。Xpath其实是XML的路径语言，支持我们在解析XML的时候，能够快速定位到某一个元素。

  - 添加jar包的依赖

    `jaxen-1.1-beta-6.jar`

  - 在查找指定节点的时候，根据Xpath语法规则来查找。

  - 后续的代码与以前的解析代码一样。

### XML约束

+ DTD，文档 类型定义，可定义合法的XML文档构建模块。

  > 语法自成一派，早期出现，可读性差，解析困难。

+ Schema是DTD的继任者。

  > 其实就是一个XML，使用XML的语法规则，XML解析器解析起来比较方便。约束文本内容较多，目前还没有完全替代。



